<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tab Limit</title>
    <link href="popup-styles.css" rel="stylesheet" />
    <link
      href="../assets/vendors/bulma.min.css"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body>
    <header class="header">
      <img class="header__icon" src="../assets/icons/icon-192.png" alt="Icon" />
      <h1>Tab Limiter And Restorer V3</h1>
      <a
        class="bmc__button"
        href="https://buymeabtc.com/uiopts"
        rel="noreferrer noopener"
        target="_blank"
        title="Buy me a BTC :)"
        ><img class="bmc__icon" src="../assets/images/btc.svg" alt="BMC"
      /></a>
    </header>

    <div class="content-container">
      <main>
        <!-- 配置部分 -->
        <div class="config-toggle">
          <button id="toggleConfig" class="toggle-button">
            <span>设置</span>
            <svg class="toggle-icon" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5z"></path>
            </svg>
          </button>
        </div>

        <div id="configSection" class="config-section">
          <!-- 基本设置 -->
          <div class="config-panel">
            <h3 class="panel-title">基本设置</h3>

            <label class="setting-item">
              <input id="inputActive" name="inputActive" type="checkbox" />
              <span>启用标签限制</span>
            </label>

            <div class="setting-item setting-item-inline">
              <div class="setting-label">标签数量限制</div>
              <input class="setting-input" id="inputTabsVisible" min="1" name="inputTabsVisible" type="number" />
            </div>

            <div class="setting-item setting-item-inline">
              <div class="setting-label">隐藏标签队列长度</div>
              <input class="setting-input" id="inputTabsQueueLength" min="1" name="inputTabsQueueLength" type="number" />
            </div>
          </div>

          <!-- 标签页自动移动 -->
          <div class="config-panel">
            <h3 class="panel-title">标签页自动移动</h3>

            <label class="setting-item">
              <input id="inputAutoMoveEnabled" name="inputAutoMoveEnabled" type="checkbox" />
              <span>启用标签页自动移动</span>
              <small class="setting-desc">访问标签页后延迟一段时间自动移动到指定位置</small>
            </label>

            <div class="setting-item">
              <div class="setting-label">移动方向</div>
              <div class="radio-options">
                <label>
                  <input id="inputAutoMoveDirectionLeft" name="autoMoveDirection" type="radio" value="left" />
                  <span>移动到开头</span>
                </label>
                <label>
                  <input id="inputAutoMoveDirectionRight" name="autoMoveDirection" type="radio" value="right" />
                  <span>移动到末尾</span>
                </label>
              </div>
            </div>

            <div class="setting-item setting-item-inline">
              <div class="setting-label">延迟时间（秒）</div>
              <input class="setting-input" id="inputAutoMoveDelay" min="1" max="60" name="inputAutoMoveDelay" type="number" />
            </div>
          </div>

          <!-- 自适应标签限制 -->
          <div class="config-panel">
            <h3 class="panel-title">自适应标签限制</h3>
            
            <label class="setting-item">
              <input id="inputAdaptiveLimit" name="inputAdaptiveLimit" type="checkbox" />
              <span>根据窗口宽度自动调整标签限制</span>
              <small class="setting-desc">启用后，系统会根据窗口宽度和每标签像素宽度自动计算最佳标签数量</small>
            </label>
            
            <div class="setting-item setting-item-inline">
              <div class="setting-label">每标签像素宽度</div>
              <input class="setting-input" id="inputPixelsPerTab" min="100" max="500" name="inputPixelsPerTab" type="number" />
            </div>

            <!-- 自适应标签限制信息区域 -->
            <div class="setting-item setting-item-inline" id="adaptiveInfoContainer" style="display: none;">
              <div class="setting-label">当前窗口宽度</div>
              <input class="setting-input" id="currentWindowWidth" type="text" readonly>
            </div>

            <div class="setting-item setting-item-inline" id="adaptiveInfoContainer2" style="display: none;">
              <div class="setting-label">计算得到的标签数</div>
              <input class="setting-input" id="calculatedTabLimit" type="text" readonly>
            </div>

            <div class="setting-item setting-item-inline" id="adaptiveInfoContainer3" style="display: none;">
              <div class="setting-label">实际标签限制</div>
              <input class="setting-input" id="effectiveTabLimit" type="text" readonly>
              <small class="setting-desc">（取计算值和固定限制中的较小值）</small>
            </div>
          </div>
          

          <!-- 徽标设置 -->
          <div class="config-panel">
            <h3 class="panel-title">徽标显示模式</h3>

            <div class="badge-options">
              <label class="badge-option">
                <input id="badgeModeHidden" name="badgeMode" type="radio" value="hidden" />
                <span class="badge badge-hidden" id="badgePreviewHidden">0</span>
                <span>隐藏标签数量</span>
              </label>

              <label class="badge-option">
                <input id="badgeModeOpen" name="badgeMode" type="radio" value="open" />
                <span class="badge badge-open" id="badgePreviewOpen">0</span>
                <span>打开标签数量</span>
              </label>

              <label class="badge-option">
                <input id="badgeModeUser" name="badgeMode" type="radio" value="user" />
                <span class="badge badge-user" id="badgePreviewUser">0</span>
                <span>用户标签总数</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- 隐藏标签列表 -->
        <div class="tabs-container">
          <h3 class="tabs-title">隐藏的标签</h3>
          
          <div id="emptyTabsContainer" class="empty-state">
            <img src="../assets/icons/icon-48.png" alt="空列表" class="empty-icon">
            <p id="msgNoHiddenTabs" class="empty-message">暂无隐藏标签</p>
            <p class="empty-description">当标签数量超过限制时，系统会隐藏最长时间未访问的标签</p>
          </div>
          
          <ul id="listHiddenTabs" class="tabs-list"></ul>
        </div>


      </main>
    </div>
    <script src="popup.js" type="module"></script>
  </body>
</html>
